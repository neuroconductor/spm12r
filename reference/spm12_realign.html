<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SPM12 Realign (Estimate and Reslice) — build_spm12_realign • spm12r</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="SPM12 Realign (Estimate and Reslice) — build_spm12_realign" />
<meta property="og:description" content="Performs SPM12 realignment estimation 
and reslicing on an Image" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spm12r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/fmri_processing_spm12r.html">fMRI Preprocessing using SPM 12</a>
    </li>
    <li>
      <a href="../articles/fmri_task_processing.html">Preprocessing and First Level Model for Task fMRI</a>
    </li>
    <li>
      <a href="../articles/fmri_task_processing_acpc.html">Preprocessing and First Level Model for Task fMRI with ACPC Alignment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>SPM12 Realign (Estimate and Reslice)</h1>
    
    <div class="hidden name"><code>spm12_realign.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs SPM12 realignment estimation 
and reslicing on an Image</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>build_spm12_realign</span><span class='op'>(</span><span class='va'>filename</span>, time_points <span class='op'>=</span> <span class='cn'>NULL</span>, fwhm <span class='op'>=</span> <span class='fl'>5</span>,
  quality <span class='op'>=</span> <span class='fl'>0.9</span>, separation <span class='op'>=</span> <span class='fl'>4</span>, register_to <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"first"</span>, <span class='st'>"mean"</span><span class='op'>)</span>,
  est_interp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bspline2"</span>, <span class='st'>"trilinear"</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"bspline"</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span>,
  wrap_x <span class='op'>=</span> <span class='cn'>FALSE</span>, wrap_y <span class='op'>=</span> <span class='cn'>FALSE</span>, wrap_z <span class='op'>=</span> <span class='cn'>FALSE</span>,
  weight_image <span class='op'>=</span> <span class='cn'>NULL</span>, reslice <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"all+mean"</span>, <span class='st'>"all"</span>, <span class='st'>"2:n"</span>, <span class='st'>"mean"</span><span class='op'>)</span>,
  reslice_interp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bspline4"</span>, <span class='st'>"nearestneighbor"</span>, <span class='st'>"trilinear"</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"bspline"</span>, <span class='fl'>2</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"bspline"</span>, <span class='fl'>5</span><span class='op'>:</span><span class='fl'>7</span><span class='op'>)</span>, <span class='st'>"fourier"</span><span class='op'>)</span>,
  mask <span class='op'>=</span> <span class='cn'>FALSE</span>, prefix <span class='op'>=</span> <span class='st'>"r"</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>spm12_realign</span><span class='op'>(</span><span class='va'>...</span>, add_spm_dir <span class='op'>=</span> <span class='cn'>TRUE</span>, spmdir <span class='op'>=</span> <span class='fu'><a href='spm_dir.html'>spm_dir</a></span><span class='op'>(</span>verbose <span class='op'>=</span>
  <span class='va'>verbose</span>, install_dir <span class='op'>=</span> <span class='va'>install_dir</span><span class='op'>)</span>, clean <span class='op'>=</span> <span class='cn'>TRUE</span>, retimg <span class='op'>=</span> <span class='cn'>FALSE</span>,
  reorient <span class='op'>=</span> <span class='cn'>FALSE</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span>, outdir <span class='op'>=</span> <span class='cn'>NULL</span>,
  install_dir <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filename</th>
      <td><p>Files to be realigned and resliced</p></td>
    </tr>
    <tr>
      <th>time_points</th>
      <td><p>A vector of time points to run realignment,
If <code>filename</code> is a
4D file, then will do all the time points.  Otherwise, 
<code>filename</code> must be a character
vector of 3D files or a list of 3D nifti objects.</p></td>
    </tr>
    <tr>
      <th>fwhm</th>
      <td><p>Full-Width Half Max to smooth.  Gaussian
smoothing  
to  apply  to  the 256x256 joint histogram.</p></td>
    </tr>
    <tr>
      <th>quality</th>
      <td><p>Quality versus speed trade-off.
Highest quality (1) gives most precise results, 
whereas lower qualities gives faster realignment.</p></td>
    </tr>
    <tr>
      <th>separation</th>
      <td><p>The  average  distance  between 
 sampled points (in mm).  
Can be a vector to allow a coarse registration 
followed by increasingly fine</p></td>
    </tr>
    <tr>
      <th>register_to</th>
      <td><p>Should the files be registered to the 
first or the mean</p></td>
    </tr>
    <tr>
      <th>est_interp</th>
      <td><p>Interpolator for estimation</p></td>
    </tr>
    <tr>
      <th>wrap_x</th>
      <td><p>wrap in x-direction</p></td>
    </tr>
    <tr>
      <th>wrap_y</th>
      <td><p>wrap in y-direction</p></td>
    </tr>
    <tr>
      <th>wrap_z</th>
      <td><p>wrap in z-direction</p></td>
    </tr>
    <tr>
      <th>weight_image</th>
      <td><p>weighting image to weight each 
voxel of the reference 
image during estimation. The weights are proportional to the 
inverses of the standard deviations. May be used when there is
a lot of motion.</p></td>
    </tr>
    <tr>
      <th>reslice</th>
      <td><p>Options for reslicing all - all 
images in filename,
2:n - all images in filename 2:length(filename),
all+mean - all images and the mean, mean - mean only</p></td>
    </tr>
    <tr>
      <th>reslice_interp</th>
      <td><p>Interpolator for reslicing</p></td>
    </tr>
    <tr>
      <th>mask</th>
      <td><p>Mask the data.  With masking enabled, the 
program searches 
through the whole time series looking for voxels which 
need to be sampled 
from outside  the  original  images.  Where  this  occurs, 
 that  voxel is set to zero for the whole set of images</p></td>
    </tr>
    <tr>
      <th>prefix</th>
      <td><p>Prefix to append to front of image filename</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Print diagnostic messages</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to <code><a href='run_spm12_script.html'>run_spm12_script</a></code></p></td>
    </tr>
    <tr>
      <th>add_spm_dir</th>
      <td><p>Add SPM12 directory from this package</p></td>
    </tr>
    <tr>
      <th>spmdir</th>
      <td><p>SPM dir to add, will use package default directory</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Remove scripts from temporary directory 
after running</p></td>
    </tr>
    <tr>
      <th>retimg</th>
      <td><p>(logical) return image of class nifti</p></td>
    </tr>
    <tr>
      <th>reorient</th>
      <td><p>(logical) If retimg, should file be 
reoriented when read in?</p></td>
    </tr>
    <tr>
      <th>outdir</th>
      <td><p>Directory to copy results.
If full filename given, then results will
be in <code>dirname(filename)</code></p></td>
    </tr>
    <tr>
      <th>install_dir</th>
      <td><p>directory to download SPM12</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>List of output files, the <code>matlabbatch</code> object, 
and the script</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='va'>dims</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>4</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>temp_nii</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/array.html'>array</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='va'>dims</span><span class='op'>)</span><span class='op'>)</span>, dim <span class='op'>=</span> <span class='va'>dims</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>temp_nii</span> <span class='op'>=</span> <span class='fu'>oro.nifti</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/oro.nifti/man/nifti.html'>nifti</a></span><span class='op'>(</span><span class='va'>temp_nii</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>res</span> <span class='op'>=</span> <span class='fu'>build_spm12_realign</span><span class='op'>(</span><span class='va'>temp_nii</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> # Getting Number of Time Points</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> # Reslice is all+mean</span>
<span class='r-in'></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by John Muschelli.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


